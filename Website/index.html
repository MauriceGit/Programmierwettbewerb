<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Programmierwettbewerb</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <style>
            .jumbotron {
                background-image: url(Images/GameSample.jpg);
                color: white;
            }  
            .hidden {
                display:none;
            }
        </style>
        <script>
            var currentView = "";
            
            var views = {
                "home": { button:"#mnuHome", htmlContainer:"#mainHTML" },
                "rules": { button:"#mnuRules", htmlContainer:"#rulesHTML" },
                "botDevelopment": { button:"#mnuBotDevelopment", htmlContainer:"#botDevelopmentHTML" },
                "simulations": { button:"#mnuSimulations", htmlContainer:"#simulationsHTML" },
            };
        
            function openView(name) {                
                var mainContainer = $("#container");
                
                if (currentView != "") {
                    var previousHtmlContainer = $(views[currentView].htmlContainer);                    
                    var previousButton = $(views[currentView].button);                    
                    
                    previousHtmlContainer.html(mainContainer.children());
                    previousButton.removeClass("active");
                }
                
                var currentHtmlContainer = $(views[name].htmlContainer);
                var currentButton = $(views[name].button);

                mainContainer.html(currentHtmlContainer.children());                
                currentButton.addClass("active");
                
                currentView = name;
            }
            
            $(window).load(function(){
                openView("home");
                
                function handlerMaker(view) {
                    return function() { openView(view); };
                }
                
                for (var view in views) {
                    if (views.hasOwnProperty(view)) {
                        $(views[view].button).click(handlerMaker(view));
                    }
                }
            });
        </script>
    </head>
    <body>
        <div id="mainHTML" class="hidden">
            <div id="jumbotron" class="jumbotron">
                <h1>Agar.io</h1>
                <p>FH Wedel - Programmierwettbewerb Wintersemenster 2016</p> 
            </div>
            <a type="button" class="btn btn-success btn-block" href="http://www.google.de">Open Game</a>
        </div>
        <div id="rulesHTML" class="hidden">
            <div class="row">
                <div class="col-sm-4">
                    <h3>Regel 1</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
                <div class="col-sm-4">
                    <h3>Regel 2</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
                <div class="col-sm-4">
                    <h3>Regel 3</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
            </div>
        </div>
        <div id="botDevelopmentHTML" class="hidden">
            <h2>Einleitung</h2>
            <div>
                <p>
                    Alle Berechnungen zur Änderung des Spielzustands werden von einem Server übernommen. Pro Berechnungsschritt übermittelt 
                    dieser euren Bots den aktuellen Spielzustand, den ihr anschließend auswerten und in ein Kommando übersetzen müsst. Dieses müsst ihr
                    dem Server zurückschicken, um die nächste Handlung eures Bots bekannt zu geben. 
                <p>
                </p>
                    Damit ihr euch keine Gedanken, um die konkrete Übertragung von Daten zum Server machen müsst, haben wir ein kleines Program geschrieben, das euch diese Aufgabe abnimmt. Diese
                    Middleware startet eure Bots, leitet ihnen die Daten von Server über <code>stdin</code> weiter und wartet dann auf die Antwort eures Bots über <code>stdout</code>, um
                    diese anschließend wieder zum Server zu schicken.
                </p>
                <center><img src="Images/InformationFlow1.jpg" alignment="center" /></center>
                <p>Zum Testen startet ihr eure Bots wie folgt:</p>
                <pre>
./Programmierwettbewerb-Middleware -bot=myBot -name=myName</pre>
            </div>
            <h2>Datenformate</h2>
            <div class="row">
                <div class="col-sm-6">
                    <h3>Eingabe</h3>
                    <pre>
type BotId      = Int
type TeamId     = Int
type Index      = Int
type Position   = (Float, Float)
type Mass       = Int
type Blob       = (BotId, TeamId, Index, Position, Mass)
type Food       = (Position, Mass)
type Toxin      = (Position, Mass)
type OwnBlobs   = [Blob]
type OtherBlobs = [Blob]
type Input      = (OwnBlobs, OtherBlobs, [Food], [Toxin])</pre>
                </div>
                <div class="col-sm-6">
                    <h3>Ausgabe</h3>
                    <pre>
data BlobAction = None | Throw | Split
type Position   = (Float, Float)
type Output     = (BlobAction, Position)</pre>
                </div>
            </div>
            <h2>Beispiel-Bots</h2>            
            <div class="row">
                <div class="col-sm-6">
                    <h3>Python</h3>
                    <pre>
def process(data) {
     // TODO: Calculate the target and action of your bot!
}
                    
while (1):
    line = sys.stdin.readline()
    data = eval(line)
    process(data)</pre>
                    <a class="btn btn-default">Show in Repository</a>
                </div>
                <div class="col-sm-6">
                    <h3>C</h3>
                    <pre>
#define PWB_IMPLEMENTATION
#include "pwb.h"

BotCommand process(const VisibleGameState* const visibleGameState) {
    Vec2 target;
    BotActionType botActionType;

    // TODO: Calculate the target and action of your bot!

    return pwb_mkBotCommand(botActionType, &target);
}

int main() {
    #define INPUT_BUFFER_MAX_LENGTH 2000
    #define OUTPUT_BUFFER_MAX_LENGTH 100

    char inputBuffer[INPUT_BUFFER_MAX_LENGTH];
    char outputBuffer[OUTPUT_BUFFER_MAX_LENGTH];

    for (;;) {
        pwb_getline(inputBuffer, INPUT_BUFFER_MAX_LENGTH);

        ParseContext parseContext = pwb_mkContext(inputBuffer);

        VisibleGameState visibleGameState;
        if (!pwb_parseAll(&parseContext, &visibleGameState)) {
            pwb_printErrors(&parseContext, stderr);
            exit(1);
        }

        BotCommand botCommand = process(&visibleGameState);

        pwb_toString(outputBuffer, &botCommand);
        printf("%s\n", outputBuffer);
        fflush(stdout);
    }

    return 0;
}</pre>
                    <a class="btn btn-default">Show in Repository</a>
                </div>
            </div>
        </div>
        <div id="simulationsHTML" class="hidden">
            <h2>Allgemeines</h2>
            <div class="row">
                <div class="col-sm-4">
                    <h3>Main-Loop</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
                <div class="col-sm-4">
                    <h3>Spawnen von Spielelementen</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
                <div class="col-sm-4">
                    <h3>Geschwindigkeit und Position</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
            </div>
            <h2>Aktionen</h2>
            <div class="row">
                <div class="col-sm-4">
                    <h3>Teilen und Explodieren</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
                <div class="col-sm-4">
                    <h3>Masse werfen und Teilen von Gift</h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
            </div>
        </div>
        <nav class="navbar navbar-default navbar-static-top">
            <div class="container">
            <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Programmierwettbewerb</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active" id="mnuHome"><a href="#">Home</a></li>
                    <li id="mnuRules"><a href="#">Spielregeln</a></li>
                    <li id="mnuBotDevelopment"><a href="#">Bot-Entwicklung</a></li>
                    <li id="mnuSimulations"><a href="#">Server-Simulationen</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://github.com/hpatjens/Programmierwettbewerb">Repository</a></li>                    
                </ul>
            </div><!--/.nav-collapse -->
            </div>
        </nav>
        
        <div id="container" class="container">
        </div>
    </body>
</html>
